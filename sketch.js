// sketch.js

let player;
let movingSquares = [];
let speed = 2;
let numSquares = 1000;
let textures = [];
let texturesmap;

let skibidi = 40


import tickUpdate from './tickUpdate.js';
import MovingSquare from './MovingSquare.js';



const sketch = (p) => {

let player;
let movingSquares = [];

p.preload = () => {
  p.texturesmap = null;
  p.imageLoaded = false;

  p.loadImage(
    'data:image/jpeg;base64,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',
    (img) => {
      p.texturesmap = img;
      p.imageLoaded = true;
    },
    () => {
      // Create placeholder image if loading fails
      const fallback = p.createGraphics(100, 100);
      fallback.background(200, 0, 0);
      fallback.fill(255);
      fallback.textAlign(p.CENTER, p.CENTER);
      fallback.text("Image failed", 50, 50);

      p.texturesmap = fallback;
      p.imageLoaded = true;
    }
  );
};

  
p.buildlevel = (lvl,sx,sy) => {
  movingSquares = [];
  let spawnx = sx+p.width / 2;
  let spawny = sy+p.height / 2;
  p.globx = spawnx;
  p.globy = spawny;
  
  if (lvl == 1) {
  movingSquares.push(new MovingSquare(-2000-spawnx, -2000-spawny, 4000, p.texturesmap));

  for (let i = 0; i < numSquares; i++) {
    let x = p.random(2000-spawnx, 2000-spawny);
    let y = p.random(-2000-spawnx, 2000-spawny);
    let sqsize = 20;
    let tex = p.texturesmap;
    console.log(tex)
    movingSquares.push(new MovingSquare(x, y, sqsize, tex));
  }
}
}

p.setup = () => {
  p.createCanvas(p.windowWidth, p.windowHeight);
  p.globx = p.width / 2;
  p.globy = p.height / 2;
  p.player = {
    x: p.width / 2,
    y: p.height / 2,
    sqsize: 32,
  };
  console.log('ee');
  console.log(p.player);
  p.textSize(32);
  p.fill(0); 
  p.buildlevel(1,-2000,-2000)  


  }




p.draw = () => {
  p.background(240);

  let dx = 0;
  let dy = 0;
  if (p.keyIsDown(87)) dy += speed;
  if (p.keyIsDown(83)) dy -= speed;
  if (p.keyIsDown(65)) dx += speed;
  if (p.keyIsDown(68)) dx -= speed;
  p.globx -= dx;
  p.globy -= dy;
  tickUpdate(movingSquares, dx, dy, p);

  for (let sq of movingSquares) {
    sq.display(p);
  }
  p.text("coords: " + p.globx + "," + p.globy, 50, 100);

  p.fill(255, 50, 50);
  p.noStroke();
  p.rectMode(p.CENTER);
  p.rect(p.player.x, p.player.y, p.player.sqsize, p.player.sqsize);
}

}

new p5(sketch);
